{
  "hash": "dc23b20dc90ee6a5031de19eebb4c427",
  "result": {
    "markdown": "---\ntitle: \"Employee Churn- Survival Analysis\"\nauthor: \"Karol Orozco\"\ndate: \"2022-10-04\"\n---\n\n\n## 1. Introduction\n\n\n\n## 2. Import Libraries\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──\n✔ ggplot2 3.3.6     ✔ purrr   0.3.4\n✔ tibble  3.1.8     ✔ dplyr   1.0.9\n✔ tidyr   1.2.0     ✔ stringr 1.4.1\n✔ readr   2.1.2     ✔ forcats 0.5.2\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n\nAttaching package: 'gridExtra'\n\n\nThe following object is masked from 'package:dplyr':\n\n    combine\n```\n:::\n:::\n\n\n## 3. Load and Prepare the Data\n\nThis data set came from Kaggle\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemployee.att <- read.csv(\"C:/Users/karol/Desktop/Portfolio/DATASET/IBM-HR-Employee-Attrition.csv\")\n```\n:::\n\n\nLet's take a look at the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(employee.att)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t1470 obs. of  35 variables:\n $ Age                     : int  41 49 37 33 27 32 59 30 38 36 ...\n $ Attrition               : chr  \"Yes\" \"No\" \"Yes\" \"No\" ...\n $ BusinessTravel          : chr  \"Travel_Rarely\" \"Travel_Frequently\" \"Travel_Rarely\" \"Travel_Frequently\" ...\n $ DailyRate               : int  1102 279 1373 1392 591 1005 1324 1358 216 1299 ...\n $ Department              : chr  \"Sales\" \"Research & Development\" \"Research & Development\" \"Research & Development\" ...\n $ DistanceFromHome        : int  1 8 2 3 2 2 3 24 23 27 ...\n $ Education               : int  2 1 2 4 1 2 3 1 3 3 ...\n $ EducationField          : chr  \"Life Sciences\" \"Life Sciences\" \"Other\" \"Life Sciences\" ...\n $ EmployeeCount           : int  1 1 1 1 1 1 1 1 1 1 ...\n $ EmployeeNumber          : int  1 2 4 5 7 8 10 11 12 13 ...\n $ EnvironmentSatisfaction : int  2 3 4 4 1 4 3 4 4 3 ...\n $ Gender                  : chr  \"Female\" \"Male\" \"Male\" \"Female\" ...\n $ HourlyRate              : int  94 61 92 56 40 79 81 67 44 94 ...\n $ JobInvolvement          : int  3 2 2 3 3 3 4 3 2 3 ...\n $ JobLevel                : int  2 2 1 1 1 1 1 1 3 2 ...\n $ JobRole                 : chr  \"Sales Executive\" \"Research Scientist\" \"Laboratory Technician\" \"Research Scientist\" ...\n $ JobSatisfaction         : int  4 2 3 3 2 4 1 3 3 3 ...\n $ MaritalStatus           : chr  \"Single\" \"Married\" \"Single\" \"Married\" ...\n $ MonthlyIncome           : int  5993 5130 2090 2909 3468 3068 2670 2693 9526 5237 ...\n $ MonthlyRate             : int  19479 24907 2396 23159 16632 11864 9964 13335 8787 16577 ...\n $ NumCompaniesWorked      : int  8 1 6 1 9 0 4 1 0 6 ...\n $ Over18                  : chr  \"Y\" \"Y\" \"Y\" \"Y\" ...\n $ OverTime                : chr  \"Yes\" \"No\" \"Yes\" \"Yes\" ...\n $ PercentSalaryHike       : int  11 23 15 11 12 13 20 22 21 13 ...\n $ PerformanceRating       : int  3 4 3 3 3 3 4 4 4 3 ...\n $ RelationshipSatisfaction: int  1 4 2 3 4 3 1 2 2 2 ...\n $ StandardHours           : int  80 80 80 80 80 80 80 80 80 80 ...\n $ StockOptionLevel        : int  0 1 0 0 1 0 3 1 0 2 ...\n $ TotalWorkingYears       : int  8 10 7 8 6 8 12 1 10 17 ...\n $ TrainingTimesLastYear   : int  0 3 3 3 3 2 3 2 2 3 ...\n $ WorkLifeBalance         : int  1 3 3 3 3 2 2 3 3 2 ...\n $ YearsAtCompany          : int  6 10 0 8 2 7 1 1 9 7 ...\n $ YearsInCurrentRole      : int  4 7 0 7 2 7 0 0 7 7 ...\n $ YearsSinceLastPromotion : int  0 1 0 3 2 3 0 0 1 7 ...\n $ YearsWithCurrManager    : int  5 7 0 0 2 6 0 0 8 7 ...\n```\n:::\n:::\n\n\nThis data set contains 1470 observations and 35 variables. However, for this analysis, I am interested in the following fields:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nempl.att <- employee.att %>%\n  dplyr:::select.data.frame(\"Attrition\", \"Department\", \"Age\", \"Gender\", \"MaritalStatus\", \"DistanceFromHome\", \"JobSatisfaction\", \"JobLevel\", \"YearsAtCompany\", \"YearsSinceLastPromotion\", \"OverTime\", \"MonthlyIncome\")\n\nnames(empl.att)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n [1] \"Attrition\"               \"Department\"             \n [3] \"Age\"                     \"Gender\"                 \n [5] \"MaritalStatus\"           \"DistanceFromHome\"       \n [7] \"JobSatisfaction\"         \"JobLevel\"               \n [9] \"YearsAtCompany\"          \"YearsSinceLastPromotion\"\n[11] \"OverTime\"                \"MonthlyIncome\"          \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nskim(empl.att)\n```\n\n::: {.cell-output-display}\nTable: Data summary\n\n|                         |         |\n|:------------------------|:--------|\n|Name                     |empl.att |\n|Number of rows           |1470     |\n|Number of columns        |12       |\n|_______________________  |         |\n|Column type frequency:   |         |\n|character                |5        |\n|numeric                  |7        |\n|________________________ |         |\n|Group variables          |None     |\n\n\n**Variable type: character**\n\n|skim_variable | n_missing| complete_rate| min| max| empty| n_unique| whitespace|\n|:-------------|---------:|-------------:|---:|---:|-----:|--------:|----------:|\n|Attrition     |         0|             1|   2|   3|     0|        2|          0|\n|Department    |         0|             1|   5|  22|     0|        3|          0|\n|Gender        |         0|             1|   4|   6|     0|        2|          0|\n|MaritalStatus |         0|             1|   6|   8|     0|        3|          0|\n|OverTime      |         0|             1|   2|   3|     0|        2|          0|\n\n\n**Variable type: numeric**\n\n|skim_variable           | n_missing| complete_rate|    mean|      sd|   p0|  p25|  p50|  p75|  p100|hist  |\n|:-----------------------|---------:|-------------:|-------:|-------:|----:|----:|----:|----:|-----:|:-----|\n|Age                     |         0|             1|   36.92|    9.14|   18|   30|   36|   43|    60|▂▇▇▃▂ |\n|DistanceFromHome        |         0|             1|    9.19|    8.11|    1|    2|    7|   14|    29|▇▅▂▂▂ |\n|JobSatisfaction         |         0|             1|    2.73|    1.10|    1|    2|    3|    4|     4|▅▅▁▇▇ |\n|JobLevel                |         0|             1|    2.06|    1.11|    1|    1|    2|    3|     5|▇▇▃▂▁ |\n|YearsAtCompany          |         0|             1|    7.01|    6.13|    0|    3|    5|    9|    40|▇▂▁▁▁ |\n|YearsSinceLastPromotion |         0|             1|    2.19|    3.22|    0|    0|    1|    3|    15|▇▁▁▁▁ |\n|MonthlyIncome           |         0|             1| 6502.93| 4707.96| 1009| 2911| 4919| 8379| 19999|▇▅▂▁▂ |\n:::\n:::\n\n\nThere are not missing values and most of the variables are positively skewed.\nThe age range varies from 18 to 60 years old.\nTotal Working Years ranging from 0 to 40 years.\nMonthly Income ranging from 1009 to 19999.\n\n\n#### Convert Variables\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nempl.att <- empl.att %>%\nmutate_if(is.character, factor) %>% \nmutate(JobLevel = factor(JobLevel),\n       JobSatisfaction = factor(JobSatisfaction),\n       AgeGroup = case_when(Age > 17 & Age <= 19 ~ \"17-19\",\n                            Age > 19 & Age <= 30 ~ \"20-30\",\n                            Age > 30 & Age <= 40 ~ \"30-40\",\n                            Age > 40 & Age <= 50 ~ \"40-50\",\n                            Age > 50 & Age <= 60 ~ \"50-60\", \n                            Age > 60             ~ \"> 60\")) %>% \nmutate(AgeGroup = factor(AgeGroup, level = c(\"17-19\",\"20-30\", \"30-40\",\"40-50\",\"50-60\",\"> 60\")))%>% \nmutate(Attrition = factor(Attrition, levels = c(\"Yes\", \"No\")))\n\nstr(empl.att)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t1470 obs. of  13 variables:\n $ Attrition              : Factor w/ 2 levels \"Yes\",\"No\": 1 2 1 2 2 2 2 2 2 2 ...\n $ Department             : Factor w/ 3 levels \"Human Resources\",..: 3 2 2 2 2 2 2 2 2 2 ...\n $ Age                    : int  41 49 37 33 27 32 59 30 38 36 ...\n $ Gender                 : Factor w/ 2 levels \"Female\",\"Male\": 1 2 2 1 2 2 1 2 2 2 ...\n $ MaritalStatus          : Factor w/ 3 levels \"Divorced\",\"Married\",..: 3 2 3 2 2 3 2 1 3 2 ...\n $ DistanceFromHome       : int  1 8 2 3 2 2 3 24 23 27 ...\n $ JobSatisfaction        : Factor w/ 4 levels \"1\",\"2\",\"3\",\"4\": 4 2 3 3 2 4 1 3 3 3 ...\n $ JobLevel               : Factor w/ 5 levels \"1\",\"2\",\"3\",\"4\",..: 2 2 1 1 1 1 1 1 3 2 ...\n $ YearsAtCompany         : int  6 10 0 8 2 7 1 1 9 7 ...\n $ YearsSinceLastPromotion: int  0 1 0 3 2 3 0 0 1 7 ...\n $ OverTime               : Factor w/ 2 levels \"No\",\"Yes\": 2 1 2 2 1 1 2 1 1 1 ...\n $ MonthlyIncome          : int  5993 5130 2090 2909 3468 3068 2670 2693 9526 5237 ...\n $ AgeGroup               : Factor w/ 6 levels \"17-19\",\"20-30\",..: 4 4 3 3 2 3 5 2 3 3 ...\n```\n:::\n:::\n\n\n\n## 4. Exploratory Data Analysis\n\n#### Let's see the number of deserters\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable(empl.att$Attrition)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n Yes   No \n 237 1233 \n```\n:::\n:::\n\n\n#### Let's take a look at the attrition vs some variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## MaritalStatus vs Attrition\n\nms_att <- ggplot(empl.att) +\n aes(x = MaritalStatus, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Marital Status\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, face = \"bold.italic\", hjust = 0.5))\n\n\n## Age Group vs Attrition\n\nag_att <- ggplot(empl.att) +\n aes(x = AgeGroup, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs( title = \"By Age Group\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## Gender vs Attrition\n\nge_att <- ggplot(empl.att) +\n aes(x = Gender, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Gender\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## DistanceFromHome vs Attrition\n\ndh_att <- ggplot(empl.att) +\n aes(x = DistanceFromHome, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs( x= \"Miles\",\n  title = \"By Distance From Home\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## Department vs Attrition\n\ndep_att <- ggplot(empl.att) +\n aes(x = Department, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Department\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## YearsAtCompany vs Attrition\n\nyac_att <- ggplot(empl.att) +\n aes(x = YearsAtCompany, fill = Attrition) +\n geom_density(adjust = 1L) +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Years at the Company\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## JobLevel vs Attrition\n\njl_att <- ggplot(empl.att) +\n aes(x = JobLevel, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Job Level\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n## Montly Income\n\nmi_att<- ggplot(empl.att) +\n aes(x = MonthlyIncome, fill = Attrition) +\n geom_density(adjust = 1L) +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Montly Income\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, face = \"bold.italic\", hjust = 0.5))\n\n## YearsSinceLast Promotion vs Attrition\n\n\n  yslp_att <- ggplot(empl.att) +\n aes(x = YearsSinceLastPromotion, fill = Attrition) +\n geom_density(adjust = 1L) +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Years Since Last Promotion\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n\n#JobSatisfaction vs Attrition\n\njbs_att <- ggplot(empl.att) +\n aes(x = JobSatisfaction, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By Age Group\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\n## OverTime vs Attrition\n\n  \n  ot_att <- ggplot(empl.att) +\n aes(x = OverTime, fill = Attrition) +\n geom_bar() +\n scale_fill_brewer(palette = \"Dark2\", \n direction = 1) +\n labs(title = \"By OverTime\", y= \" \") +\n theme_minimal() +\n theme(plot.title = element_text(size = 12L, \n face = \"bold.italic\", hjust = 0.5))\n\n\ngrid.arrange(ot_att, jbs_att, yslp_att, mi_att, jl_att, dep_att, yac_att, ms_att, ag_att, ge_att, dh_att, ncol = 3, nrow = 4)\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-8-1.png){width=1920}\n:::\n:::\n\n\n\n## 5. Survival Model\n\n\n## 6. Conclusion and Recomendations\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}