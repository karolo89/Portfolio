{
  "hash": "5550c82aa4aebf5b6591551280cf34da",
  "result": {
    "markdown": "---\ntitle: \"Time Series Project\"\nauthor: \"Karol Orozco\"\ndate: \"2022-10-04\"\ncategories: [news, code, analysis]\n---\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate); library(tsibble)\nlibrary(readxl)\nlibrary(purrr)\nlibrary(gganimate)\nlibrary(fpp3)\n```\n:::\n\n\n## Load the Data\n\nYou can find this free dataset on the Zillow website: https://www.zillow.com/research/data/#other-metrics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nraw_city <- read.csv(\"C:/Users/karol/Desktop/Portfolio/City_zori_sm_month.csv\")\n```\n:::\n\n\n- RegionID\tThis is unique Id for the Regions\n- SizeRank\tThis is the ranking done based on the size of the region\n- RegionName\tThis field contains the zip code of the region.\n- RegionType\tType of region is Zip.\n- StateName\tState\n- State\tThis column provide the specific City Name of Housing Data\n- Metro\tThis provide the name of the metro city around that region\n- County Name\tThis is the county name for that region\n- Months Column\tThese columns contains the prices of region for every month since 2015- 2022\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(raw_city[,c(1:11)])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t3500 obs. of  11 variables:\n $ RegionID  : int  6181 12447 39051 17426 6915 40326 13271 18959 54296 38128 ...\n $ SizeRank  : int  0 1 2 3 4 5 6 7 8 9 ...\n $ RegionName: chr  \"New York\" \"Los Angeles\" \"Houston\" \"Chicago\" ...\n $ RegionType: chr  \"city\" \"city\" \"city\" \"city\" ...\n $ StateName : chr  \"NY\" \"CA\" \"TX\" \"IL\" ...\n $ State     : chr  \"NY\" \"CA\" \"TX\" \"IL\" ...\n $ Metro     : chr  \"New York-Newark-Jersey City, NY-NJ-PA\" \"Los Angeles-Long Beach-Anaheim, CA\" \"Houston-The Woodlands-Sugar Land, TX\" \"Chicago-Naperville-Elgin, IL-IN-WI\" ...\n $ CountyName: chr  \"Queens County\" \"Los Angeles County\" \"Harris County\" \"Cook County\" ...\n $ X3.31.2015: num  2730 2004 1285 1555 1019 ...\n $ X4.30.2015: num  2755 2011 1293 1572 1029 ...\n $ X5.31.2015: num  2780 2033 1304 1587 1040 ...\n```\n:::\n:::\n\n\nWe have to make this dataset tidy. Tidy Data is a way of structuring data so that it can be easily understood by people and analyzed by machines.\n\n## Prepare and Convert the Data\n\nI need to remove the X at the beginning of the dates (X3.31.2015,...)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(raw_city) <- sub(\"^X\", \"\", names(raw_city))\nstr(raw_city[,c(1:10)],10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n'data.frame':\t3500 obs. of  10 variables:\n $ RegionID  : int  6181 12447 39051 17426 6915 40326 13271 18959 54296 38128 ...\n $ SizeRank  : int  0 1 2 3 4 5 6 7 8 9 ...\n $ RegionName: chr  \"New York\" \"Los Angeles\" \"Houston\" \"Chicago\" ...\n $ RegionType: chr  \"city\" \"city\" \"city\" \"city\" ...\n $ StateName : chr  \"NY\" \"CA\" \"TX\" \"IL\" ...\n $ State     : chr  \"NY\" \"CA\" \"TX\" \"IL\" ...\n $ Metro     : chr  \"New York-Newark-Jersey City, NY-NJ-PA\" \"Los Angeles-Long Beach-Anaheim, CA\" \"Houston-The Woodlands-Sugar Land, TX\" \"Chicago-Naperville-Elgin, IL-IN-WI\" ...\n $ CountyName: chr  \"Queens County\" \"Los Angeles County\" \"Harris County\" \"Cook County\" ...\n $ 3.31.2015 : num  2730 2004 1285 1555 1019 ...\n $ 4.30.2015 : num  2755 2011 1293 1572 1029 ...\n```\n:::\n:::\n\n\nNow, I will create a new column called Price, where the values from the dates column will merge into it.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrent_city <- raw_city %>% \n  pivot_longer(-c(RegionID,SizeRank,RegionName,RegionType,StateName,State,Metro,CountyName),\n    names_to = \"Monthly\",\n    values_to = \"Price\"\n  ) \nstr(rent_city)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\ntibble [318,500 × 10] (S3: tbl_df/tbl/data.frame)\n $ RegionID  : int [1:318500] 6181 6181 6181 6181 6181 6181 6181 6181 6181 6181 ...\n $ SizeRank  : int [1:318500] 0 0 0 0 0 0 0 0 0 0 ...\n $ RegionName: chr [1:318500] \"New York\" \"New York\" \"New York\" \"New York\" ...\n $ RegionType: chr [1:318500] \"city\" \"city\" \"city\" \"city\" ...\n $ StateName : chr [1:318500] \"NY\" \"NY\" \"NY\" \"NY\" ...\n $ State     : chr [1:318500] \"NY\" \"NY\" \"NY\" \"NY\" ...\n $ Metro     : chr [1:318500] \"New York-Newark-Jersey City, NY-NJ-PA\" \"New York-Newark-Jersey City, NY-NJ-PA\" \"New York-Newark-Jersey City, NY-NJ-PA\" \"New York-Newark-Jersey City, NY-NJ-PA\" ...\n $ CountyName: chr [1:318500] \"Queens County\" \"Queens County\" \"Queens County\" \"Queens County\" ...\n $ Monthly   : chr [1:318500] \"3.31.2015\" \"4.30.2015\" \"5.31.2015\" \"6.30.2015\" ...\n $ Price     : num [1:318500] 2730 2755 2780 2805 2821 ...\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#Converting the Date from factor to character\nrent_clean <- rent_city %>%\n            mutate(Monthly_parsed = as.Date(Monthly,\"%m.%d.%Y\"))\n\n\nrent_clean[[\"Monthly\"]]<- as.character(rent_clean$Monthly)\n\nrent_city[[\"Monthly\"]]<- as.character(rent_city$Monthly)\nsummary(rent_city)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    RegionID         SizeRank        RegionName         RegionType       \n Min.   :  3310   Min.   :    0.0   Length:318500      Length:318500     \n 1st Qu.: 16840   1st Qu.:  886.8   Class :character   Class :character  \n Median : 31552   Median : 1902.5   Mode  :character   Mode  :character  \n Mean   : 63080   Mean   : 2637.9                                        \n 3rd Qu.: 46147   3rd Qu.: 3441.2                                        \n Max.   :840556   Max.   :28107.0                                        \n                                                                         \n  StateName            State              Metro            CountyName       \n Length:318500      Length:318500      Length:318500      Length:318500     \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n                                                                            \n   Monthly              Price         \n Length:318500      Min.   :     0.0  \n Class :character   1st Qu.:   912.1  \n Mode  :character   Median :  1273.5  \n                    Mean   :  1392.0  \n                    3rd Qu.:  1694.8  \n                    Max.   :112760.4  \n                    NA's   :28270     \n```\n:::\n:::\n\n\n\nWe see some missing values in the Price variable, but before I deal with those values, I will filter my data to the cities that I am interested the most: Houston, Orlando and Portland.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\npreferred_cities <- rent_clean %>%\n  filter(rent_clean$RegionName %in% c(\"Houston\", \"Orlando\", \"Portland\"))\n\nsummary(preferred_cities)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n    RegionID        SizeRank      RegionName         RegionType       \n Min.   :13121   Min.   :  2.0   Length:364         Length:364        \n 1st Qu.:13310   1st Qu.: 15.5   Class :character   Class :character  \n Median :26212   Median : 21.0   Mode  :character   Mode  :character  \n Mean   :26490   Mean   :206.2                                        \n 3rd Qu.:39392   3rd Qu.:211.8                                        \n Max.   :40415   Max.   :781.0                                        \n  StateName            State              Metro            CountyName       \n Length:364         Length:364         Length:364         Length:364        \n Class :character   Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character   Mode  :character  \n                                                                            \n                                                                            \n                                                                            \n   Monthly              Price      Monthly_parsed      \n Length:364         Min.   :1195   Min.   :2015-03-31  \n Class :character   1st Qu.:1370   1st Qu.:2017-01-31  \n Mode  :character   Median :1514   Median :2018-12-31  \n                    Mean   :1540   Mean   :2018-12-30  \n                    3rd Qu.:1631   3rd Qu.:2020-11-30  \n                    Max.   :2330   Max.   :2022-09-30  \n```\n:::\n:::\n\n\n\nAfter filtering the data, we don't have any missing values\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncolSums(is.na(preferred_cities))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n      RegionID       SizeRank     RegionName     RegionType      StateName \n             0              0              0              0              0 \n         State          Metro     CountyName        Monthly          Price \n             0              0              0              0              0 \nMonthly_parsed \n             0 \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nts_rent_pref_cities <- preferred_cities[,c(\"Monthly_parsed\",\"Price\")]\n\n\n#### Display the first 10 elements of the dataset\n\nhead(ts_rent_pref_cities, n = 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 2\n   Monthly_parsed Price\n   <date>         <dbl>\n 1 2015-03-31     1285.\n 2 2015-04-30     1293.\n 3 2015-05-31     1304.\n 4 2015-06-30     1314.\n 5 2015-07-31     1318.\n 6 2015-08-31     1318.\n 7 2015-09-30     1312.\n 8 2015-10-31     1306.\n 9 2015-11-30     1304.\n10 2015-12-31     1307.\n```\n:::\n\n```{.r .cell-code}\n#### Display the last 10 elements of the dataset\n\ntail(ts_rent_pref_cities, n = 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 10 × 2\n   Monthly_parsed Price\n   <date>         <dbl>\n 1 2021-12-31     2120.\n 2 2022-01-31     2118.\n 3 2022-02-28     2098.\n 4 2022-03-31     2096.\n 5 2022-04-30     2181.\n 6 2022-05-31     2228.\n 7 2022-06-30     2267.\n 8 2022-07-31     2296.\n 9 2022-08-31     2327.\n10 2022-09-30     2330.\n```\n:::\n:::\n\nWe see that the date goes from March 31, 2015, to September 30, 2022, with a monthly calculation of the rental value.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npreferred_cities %>%\n  ggplot(aes(x= Monthly_parsed, y= Price, color= RegionName)) +\n  geom_line(size=2) +\n  labs(y=\"Rent Price in /n US Dollars\", \n       x= \"Year\",\n       title=\"Rent Cost in Portland, Orlando & Houston, 2015-2022\",\n       caption = \"data:https://www.zillow.com/research/data\")+\n  facet_grid(RegionName~ ., scales = \"free_y\")+\n  hrbrthemes::theme_ipsum_rc()+  \n  theme(legend.position = \"none\") \n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=1440}\n:::\n:::\n\n\n# Decomposition\n\n## Classical Decomposition\n\n\n\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}