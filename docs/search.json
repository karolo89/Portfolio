[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Portfolio",
    "section": "",
    "text": "news\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\n\n\nOct 4, 2022\n\n\nKarol Orozco\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nOct 1, 2022\n\n\nKarol Orozco\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/Regression/index.html",
    "href": "posts/Regression/index.html",
    "title": "Analyzing Employee Turnover",
    "section": "",
    "text": "You work for the human capital department of a large corporation. The Board is worried about the relatively high turnover, and your team must look into ways to reduce the number of employees leaving the company. The team needs to understand better the situation, which employees are more likely to leave, and why. Once it is clear what variables impact employee churn, you can present your findings along with your ideas on how to attack the problem.\n\n\nCreate a report that covers the following:\n\nWhich department has the highest employee turnover? Which one has the lowest?\nInvestigate which variables seem to be better predictors of employee departure.\nWhat recommendations would you make regarding ways to reduce employee turnover?"
  },
  {
    "objectID": "posts/Regression/index.html#import-libraries",
    "href": "posts/Regression/index.html#import-libraries",
    "title": "Analyzing Employee Turnover",
    "section": "2. Import Libraries",
    "text": "2. Import Libraries\n\nlibrary(tidyverse)\nlibrary(ggplot2)\nlibrary(skimr)\nlibrary(janitor)\nlibrary(knitr)\nlibrary(radiant)\nlibrary(colorspace)\nlibrary(gridExtra)\nlibrary(jtools)\nlibrary(dplyr)\nlibrary(MASS)"
  },
  {
    "objectID": "posts/Regression/index.html#prepare-and-analyze-the-data",
    "href": "posts/Regression/index.html#prepare-and-analyze-the-data",
    "title": "Analyzing Employee Turnover",
    "section": "3. Prepare and Analyze the Data",
    "text": "3. Prepare and Analyze the Data\nThe department has assembled data on almost 10,000 employees. The team used information from exit interviews, performance reviews, and employee records.\n\n\n\nThe variables are defined as follow:\n\n“department” - the department the employee belongs to.\n“promoted” - 1 if the employee was promoted in the previous 24 months, 0 otherwise.\n“review” - the composite score the employee received in their last evaluation.\n“projects” - how many projects the employee is involved in.\n“salary” - for confidentiality reasons, salary comes in three tiers: low, medium, high.\n“tenure” - how many years the employee has been at the company.\n“satisfaction” - a measure of employee satisfaction from surveys.\n“bonus” - 1 if the employee received a bonus in the previous 24 months, 0 otherwise.\n“avg_hrs_month” - the average hours the employee worked in a month.\n“left” - “yes” if the employee ended up leaving, “no” otherwise.\n\n\n\n\nData summary\n\n\nName\nempl_turnover\n\n\nNumber of rows\n9540\n\n\nNumber of columns\n10\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\ncharacter\n3\n\n\nnumeric\n7\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: character\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmin\nmax\nempty\nn_unique\nwhitespace\n\n\n\n\ndepartment\n0\n1\n2\n11\n0\n10\n0\n\n\nsalary\n0\n1\n3\n6\n0\n3\n0\n\n\nleft\n0\n1\n2\n3\n0\n2\n0\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\n\npromoted\n0\n1\n0.03\n0.17\n0.00\n0.00\n0.00\n0.00\n1.00\n▇▁▁▁▁\n\n\nreview\n0\n1\n0.65\n0.09\n0.31\n0.59\n0.65\n0.71\n1.00\n▁▃▇▃▁\n\n\nprojects\n0\n1\n3.27\n0.58\n2.00\n3.00\n3.00\n4.00\n5.00\n▁▇▁▅▁\n\n\ntenure\n0\n1\n6.56\n1.42\n2.00\n5.00\n7.00\n8.00\n12.00\n▁▇▇▂▁\n\n\nsatisfaction\n0\n1\n0.50\n0.16\n0.00\n0.39\n0.50\n0.62\n1.00\n▁▅▇▅▁\n\n\nbonus\n0\n1\n0.21\n0.41\n0.00\n0.00\n0.00\n0.00\n1.00\n▇▁▁▁▂\n\n\navg_hrs_month\n0\n1\n184.66\n4.14\n171.37\n181.47\n184.63\n187.73\n200.86\n▁▆▇▂▁\n\n\n\n\n\n\nThere is no missing data in the data set.\nEmployees are involved between 2 to 5 projects\nEmployees have been at the company between 2 to 12 years, with an average of 6.5 years\nThe average satisfaction rate in 50.41% for all employees\nThe average worked hours per month ranged from 171.37 to 200.86 hours\nThere are some data types that need to be changed. For example, “left” is a character variable. To convert it into a quantity that takes values of zero and one, I’ll convert it into a variable of type factor with two levels: No and Yes. Later, I will use as.numeric() to convert the observations to a number, one or two. I then subtract one to get a variable that takes values zero or one and stores it as left.Numeric\n\n\n\nShow the code\nempl_turnover$department <- as.factor(empl_turnover$department)\nempl_turnover$left<- as.factor(empl_turnover$left)\nempl_turnover$promoted<- as.factor(empl_turnover$promoted)\nempl_turnover$bonus<- as.factor(empl_turnover$bonus)\nempl_turnover$salary<- factor(empl_turnover$salary, levels = c(\"low\", \"medium\", \"high\"))\nempl_turnover$left.Numeric <- as.numeric(as.factor(empl_turnover$left))-1\n\n\nglimpse(empl_turnover)\n\n\nRows: 9,540\nColumns: 11\n$ department    <fct> operations, operations, support, logistics, sales, IT, a…\n$ promoted      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ review        <dbl> 0.5775687, 0.7518997, 0.7225484, 0.6751583, 0.6762032, 0…\n$ projects      <int> 3, 3, 3, 4, 3, 2, 4, 4, 4, 3, 4, 3, 3, 3, 3, 3, 4, 4, 3,…\n$ salary        <fct> low, medium, medium, high, high, medium, high, medium, l…\n$ tenure        <dbl> 5, 6, 6, 8, 5, 5, 5, 7, 6, 6, 5, 5, 6, 5, 6, 6, 6, 5, 6,…\n$ satisfaction  <dbl> 0.6267590, 0.4436790, 0.4468232, 0.4401387, 0.5776074, 0…\n$ bonus         <fct> 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,…\n$ avg_hrs_month <dbl> 180.8661, 182.7081, 184.4161, 188.7075, 179.8211, 178.84…\n$ left          <fct> no, no, no, no, no, no, no, no, no, no, no, no, no, no, …\n$ left.Numeric  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n\n\n\nTurnover\nNumber of employees that left the company:\nThe overall attrition rate in the company is 29.2%, which means that 2,784 of 9,540 employees have left the company over the past 24 months.\n\n\nShow the code\nempl_turnover_left <- single_prop(empl_turnover, var = \"left\", lev = \"yes\")\nsummary(empl_turnover_left)\n\n\nSingle proportion test (binomial exact)\nData      : empl_turnover \nVariable  : left \nLevel     : yes in left \nConfidence: 0.95 \nNull hyp. : the proportion of yes in left = 0.5 \nAlt. hyp. : the proportion of yes in left not equal to 0.5 \n\n     p    ns     n n_missing    sd    se    me\n 0.292 2,784 9,540         0 0.455 0.005 0.009\n\n   diff    ns p.value  2.5% 97.5%    \n -0.208 2,784  < .001 0.283 0.301 ***\n\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n\n\n\nAre the employees leaving the different departments at the same rate?\n\nThe data shows that the IT department has the highest employee turnover rate, followed by logistics and retail. Finance has the lowest rate.\n\n\n\nShow the code\nempl_turnover_prop <- empl_turnover %>% \n  tabyl(department, left) %>%\n  adorn_percentages(\"row\") %>%\n  mutate(Perc_empl_left = paste0(round(yes * 100),\"%\"))\n\nkable(empl_turnover_prop,  caption = \"Department vs Attrition\")\n\n\n\nDepartment vs Attrition\n\n\ndepartment\nno\nyes\nPerc_empl_left\n\n\n\n\nadmin\n0.7186761\n0.2813239\n28%\n\n\nengineering\n0.7117414\n0.2882586\n29%\n\n\nfinance\n0.7313433\n0.2686567\n27%\n\n\nIT\n0.6910112\n0.3089888\n31%\n\n\nlogistics\n0.6916667\n0.3083333\n31%\n\n\nmarketing\n0.6970075\n0.3029925\n30%\n\n\noperations\n0.7135348\n0.2864652\n29%\n\n\nretail\n0.6943543\n0.3056457\n31%\n\n\nsales\n0.7148168\n0.2851832\n29%\n\n\nsupport\n0.7115646\n0.2884354\n29%\n\n\n\n\n\n\n\nShow the code\nempl_turnover$reordept <-reorder(empl_turnover$department, empl_turnover$left, \n                                 FUN=function(x) mean(as.numeric(x)))\n\n\nplot_depart <- empl_turnover %>%\nggplot(aes(x = reordept, fill = left)) +\ngeom_bar(position = \"fill\")+\nscale_fill_manual(values=c(\"gray\", \"#2166AC\"))+\nlabs(title = \"Turnover Rate by Department\",\n      y= \" \",\n      x= \" \") +\ncoord_flip() +\n ggpubr::theme_pubclean()+\ntheme(\n    plot.title = element_text(size =9, face = \"bold\", hjust = 0.55),\n    legend.position=\"bottom\")\n\nplot_depart\n\n\n\n\n\n\n\nAttrition vs Years at the company\nThe majority of employees that left the organization, had been working for the company between 5 to 8 years, and the proportion steadily declined.\nWhat does it mean for the organization? Well,\n\n\nShow the code\n### Tenure vs Turnover\n\n\nempl_turnover %>%\ngroup_by(tenure, left)%>%\nggplot(aes(x = tenure, fill = left)) +\ngeom_histogram(bins = 30L) +\n\nscale_fill_manual(values=c(\"gray\", \"#2166AC\"))+\n\n ggpubr::theme_pubclean()+\n\n\n  labs( x= \"Years at the Company\",\n        y= \"Number of Employees\",\n        title = \"Attrition vs Number of Years Working at the Company\")+\n\ntheme(plot.title = element_text(size =12, face = \"bold\", hjust = 0.45),\nlegend.position=\"bottom\")\n\n\n\n\n\n\n\nDo the number of projects employees are involved in and the number of hours per month worked matter in their retention?\nYes, there is a high attrition rate in employees that: - Are involved in less than three projects - Tend to work ~184 hours per month (assuming a five days work week- 8 hours each)\n\n\nShow the code\n## Projects vs Turnover\n\nprojects_turnover <- compare_props(\n  empl_turnover, \n  var1 = \"projects\", \n  var2 = \"left\", \n  levs = \"yes\")\n\nplot_proj <- plot(projects_turnover, plots = \"bar\", custom = TRUE)+ \n             labs(title = \"Attrition vs Number of Projects\",\n                      y = \" Percentage of Employees that Left\",\n                      x = \"Number of Projects Involved in\") +\n              scale_fill_discrete_diverging(\"Blue-Red\")+\n              ggpubr::theme_pubclean()+\n              theme( plot.title = element_text(size =10, \n                                               face = \"bold\", \n                                               hjust = 0.55),\n                     legend.position=\"none\")\n\n## Avg hours vs Turnover\n\nplot_avg_hrs_month <- empl_turnover %>%\n    ggplot() +\n    aes() +\n    geom_histogram(aes(y = ..density.., x = avg_hrs_month, fill = left), bins=30, )+\n    \n    facet_wrap(~ left) +   \n    scale_y_continuous(labels = scales::percent)+\n\n             labs(title = \"Attrition vs Avg Hours Worked\",\n                      y = \"Employment Status (Left)\",\n                      x = \"Number of hours worked\") +\n              scale_fill_manual(values=c(\"gray\", \"#2166AC\"))+ \n              ggpubr::theme_pubclean()+\n              theme( plot.title = element_text(size =10, face = \"bold\", hjust = 0.55),\n                     legend.position=\"none\")\n\n\n\n\n\n\n\n\n\nAttrition vs Promotion, Bonus and Salary\nMost employees are in the medium salary tier, with the rest evenly split between low and high salaries. However, this variable is no significant impact on the turnover status of the employee. Likewise, whether or not an employee received a bonus is not statistically significant on the decision to stay or leave the company.\nThe promotion variable shows a higher proportion of employees had stayed with the organization if they had received a promotion.\n\n\n\n\n\n\n\n\n\n\nEmployee Satisfaction and Review score\n\nEmployees tend to have lower satisfaction ratings as performance scores increase across employees. As the chart below shows, this feature is more appreciable for employees who have left the company in the last 24 months.\n\n\n\nShow the code\nplot_rev_sat_left<- empl_turnover %>% \n  ggplot(aes(x=review,y= satisfaction, color=left)) +\n  geom_point(alpha=0.16) + \n  geom_smooth(method=lm,se=FALSE)+\n  facet_wrap(~department, ncol=4)+\n   ggpubr::theme_pubclean()+\n   labs (x = \"Review\", \n         y = \"Satisfaction Level\",\n         title= \"\") +\n  theme(\n          strip.background= element_rect(fill= \"white\", linetype = \"blank\"),\n          strip.text = element_text(color= \"black\", face= \"bold\"),\n          strip.text.x = element_text(face = \"bold\", size= 10),\n          \n          plot.title = element_text(size =9, face = \"bold\", hjust = 0.55),\n          plot.title.position = \"plot\")+\n          scale_color_manual(values=c(\"gray\", \"#2166AC\"))\n\n\n\nplot_rev_sat_left"
  },
  {
    "objectID": "posts/Regression/index.html#the-model",
    "href": "posts/Regression/index.html#the-model",
    "title": "Analyzing Employee Turnover",
    "section": "4. The Model",
    "text": "4. The Model\n\nA Scaled Coefficient Plot\nThe graph below shows that not all the predictors are important in deciding to leave the company. Review, satisfaction, promoted and avg_hrs_month, by conventional standards, have a very low probability of no relationship/zero slopes.\n\n\nShow the code\nempl_turnover %>%\n    mutate(review = scale(review), satisfaction = scale(satisfaction), tenure = scale(tenure),projects = scale(projects), avg_hrs_month = scale(avg_hrs_month)) %>%\n  \n    glm(left ~ department+ review+ satisfaction+ avg_hrs_month+ promoted+ tenure+ promoted+ projects+ salary+ bonus,\n        family = binomial(link = \"probit\"), data = .) %>%\n    plot_summs(., inner_ci_level = 0.95)\n\n\n\n\n\n\n\nLogistic Regression\nFor my model I will use the following variables: promoted, review, projects, satisfaction, and average hours worked. This decision was made based on an stepwise regression model (using both forward selection and backward elimination) where all the variables were included and the once with low colinearity were eliminated.\n\n\nShow the code\nempl_tur<- empl_turnover %>% dplyr:::select(c(-reordept, -left.Numeric))\n\n\n\n\nShow the code\nfull.model <- glm(left~ department+ promoted+ review+ projects+\nsalary+ tenure+ satisfaction+ bonus+ avg_hrs_month, \ndata = empl_tur, family = binomial)\n\nsummary(full.model)\n\n\n\nCall:\nglm(formula = left ~ department + promoted + review + projects + \n    salary + tenure + satisfaction + bonus + avg_hrs_month, family = binomial, \n    data = empl_tur)\n\nDeviance Residuals: \n    Min       1Q   Median       3Q      Max  \n-2.4381  -0.8205  -0.6034   1.0706   2.7779  \n\nCoefficients:\n                        Estimate Std. Error z value Pr(>|z|)    \n(Intercept)           -21.493059   4.739307  -4.535 5.76e-06 ***\ndepartmentengineering   0.010344   0.130062   0.080 0.936608    \ndepartmentfinance      -0.070328   0.165088  -0.426 0.670107    \ndepartmentIT            0.121550   0.168377   0.722 0.470360    \ndepartmentlogistics     0.098104   0.167795   0.585 0.558773    \ndepartmentmarketing     0.043406   0.141465   0.307 0.758972    \ndepartmentoperations   -0.028534   0.129996  -0.219 0.826263    \ndepartmentretail        0.114473   0.129461   0.884 0.376575    \ndepartmentsales        -0.005853   0.127297  -0.046 0.963328    \ndepartmentsupport       0.024313   0.144010   0.169 0.865934    \npromotedYes            -0.558972   0.156892  -3.563 0.000367 ***\nreview                 11.160858   0.363223  30.727  < 2e-16 ***\nprojects               -0.067532   0.041581  -1.624 0.104350    \nsalarymedium            0.075272   0.069816   1.078 0.280970    \nsalaryhigh              0.018895   0.087327   0.216 0.828700    \ntenure                 -0.011131   0.082660  -0.135 0.892880    \nsatisfaction            2.457897   0.186556  13.175  < 2e-16 ***\nbonusYes               -0.057958   0.059113  -0.980 0.326853    \navg_hrs_month           0.066040   0.028298   2.334 0.019609 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 11520  on 9539  degrees of freedom\nResidual deviance: 10337  on 9521  degrees of freedom\nAIC: 10375\n\nNumber of Fisher Scoring iterations: 4\n\n\n\n\nLet’s split the data\n\n\nShow the code\nset.seed(123)\ndata_split <- initial_split(empl_tur, prop = 3/4)\n\ntrain.data <- training(data_split)\n\ntest.data  <- testing(data_split)\n\n\n\n\nComputing stepwise logistique regression\n\n\nShow the code\n# Fit the model\n\nmodel <- glm(left ~ department+ promoted+ review+ projects+\nsalary+ tenure+ satisfaction+ bonus+ avg_hrs_month,\ndata = train.data, family = binomial) %>%\n  stepAIC(trace = FALSE)\n\n# Summarize the final selected model\nsummary(model)\n\n\n\nCall:\nglm(formula = left ~ promoted + review + satisfaction + bonus + \n    avg_hrs_month, family = binomial, data = train.data)\n\nDeviance Residuals: \n    Min       1Q   Median       3Q      Max  \n-2.0471  -0.8148  -0.5930   1.0487   2.7958  \n\nCoefficients:\n                Estimate Std. Error z value Pr(>|z|)    \n(Intercept)   -20.765742   1.441891 -14.402  < 2e-16 ***\npromotedYes    -0.586594   0.178620  -3.284  0.00102 ** \nreview         11.655310   0.428243  27.217  < 2e-16 ***\nsatisfaction    2.680873   0.219774  12.198  < 2e-16 ***\nbonusYes       -0.131276   0.069554  -1.887  0.05911 .  \navg_hrs_month   0.058488   0.006937   8.431  < 2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for binomial family taken to be 1)\n\n    Null deviance: 8595.3  on 7154  degrees of freedom\nResidual deviance: 7660.6  on 7149  degrees of freedom\nAIC: 7672.6\n\nNumber of Fisher Scoring iterations: 4\n\n\n\n\nPerform stepwise variable selection\nSelect the most contributive variables:\n\n\nShow the code\nstep.model <- full.model %>% stepAIC(trace = FALSE)\ncoef(step.model)\n\n\n  (Intercept)   promotedYes        review      projects  satisfaction \n -20.78275350   -0.56064635   11.15148701   -0.06756327    2.45678963 \navg_hrs_month \n   0.06220750 \n\n\n\n\nShow the code\nlibrary(LogisticDx)\n\nmodel_diagnostics <- LogisticDx::gof(step.model, plotROC = TRUE)"
  },
  {
    "objectID": "posts/Regression/index.html#section",
    "href": "posts/Regression/index.html#section",
    "title": "Analyzing Employee Turnover",
    "section": "",
    "text": "Show the code\nmodel2 <- glm(formula = left ~ promoted + review + satisfaction + bonus + tenure +  avg_hrs_month, family = binomial, data = train.data)\n\ncoef(model2)\n\n\n  (Intercept)   promotedYes        review  satisfaction      bonusYes \n -24.92708321   -0.58724188   11.66591046    2.67842602   -0.13178813 \n       tenure avg_hrs_month \n  -0.07543137    0.08367092 \n\n\nShow the code\nmodel_diagnostics2 <- LogisticDx::gof(model2, plotROC = TRUE)\n\n\n\n\n\n```"
  },
  {
    "objectID": "posts/Time-Series/index.html",
    "href": "posts/Time-Series/index.html",
    "title": "Time Series Project",
    "section": "",
    "text": "Show the code\n1 + 1\n\n\n[1] 2"
  }
]